generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model ycCargos {
  id                 BigInt               @id(map: "PK_ycCargos") @default(autoincrement())
  sysCreatedAt       DateTime             @default(now(), map: "DF__ycCargos__sysCre__787EE5A0")
  sysUpdatedAt       DateTime?
  sysTenantId        BigInt
  sysUserId          BigInt?
  nome               String               @db.VarChar(100)
  descricao          String?              @db.VarChar(255)
  ativo              Boolean              @default(true, map: "DF__ycCargos__ativo__797309D9")
  interno            Boolean              @default(true, map: "DF__ycCargos__intern__2EDAF651")
  ycUsuarios         ycUsuarios?          @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycCargos_sysUserId")
  ycEmpresas         ycEmpresas           @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycCargos_ycEmpresas")
  ycCargosPermissoes ycCargosPermissoes[]
  ycUsuariosEmpresas ycUsuariosEmpresas[]

  @@index([sysTenantId], map: "IX_ycCargos_sysTenantId")
}

model ycCargosPermissoes {
  id           BigInt       @id(map: "PK_ycCargosPermissoes") @default(autoincrement())
  sysCreatedAt DateTime     @default(now(), map: "DF__ycCargosP__sysCr__7E37BEF6")
  sysUpdatedAt DateTime?
  sysTenantId  BigInt
  sysUserId    BigInt?
  cargoId      BigInt
  permissaoId  BigInt
  ycUsuarios   ycUsuarios?  @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycCargosPermissoes_sysUserId")
  ycCargos     ycCargos     @relation(fields: [cargoId], references: [id], onUpdate: NoAction, map: "FK_ycCargosPermissoes_ycCargos")
  ycEmpresas   ycEmpresas   @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycCargosPermissoes_ycEmpresas")
  ycPermissoes ycPermissoes @relation(fields: [permissaoId], references: [id], onUpdate: NoAction, map: "FK_ycCargosPermissoes_ycPermissoes")

  @@unique([cargoId, permissaoId], map: "UQ_ycCargosPermissoes_Composta")
  @@index([sysTenantId], map: "IX_ycCargosPermissoes_sysTenantId")
}

model ycEmpresas {
  id                           BigInt                         @id(map: "PK_ycEmpresas") @default(autoincrement())
  sysCreatedAt                 DateTime                       @default(now(), map: "DF__ycEmpresa__sysCr__74AE54BC")
  sysUpdatedAt                 DateTime?
  sysUserId                    BigInt?
  nome                         String                         @db.VarChar(255)
  cnpj                         String                         @unique(map: "UQ_ycEmpresas_cnpj") @db.VarChar(20)
  logo                         String?                        @db.VarChar(500)
  corPrimaria                  String?                        @db.VarChar(7)
  corSecundaria                String?                        @db.VarChar(7)
  ativo                        Boolean                        @default(true, map: "DF__ycEmpresa__ativo__75A278F5")
  ycBlocos                     ycBlocos[]
  ycCargos                     ycCargos[]
  ycCargosPermissoes           ycCargosPermissoes[]
  ycUsuarios                   ycUsuarios?                    @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycEmpresas_sysUserId")
  ycEscopos                    ycEscopos[]
  ycFluxosPadrao               ycFluxosPadrao[]
  ycLeads                      ycLeads[]
  ycProjetos                   ycProjetos[]
  ycPropostas                  ycPropostas[]
  ycPropostasCondicoes         ycPropostasCondicoes[]
  ycPropostasHistorico         ycPropostasHistorico[]
  ycTabelasPreco               ycTabelasPreco[]
  ycTabelasPrecoItens          ycTabelasPrecoItens[]
  ycUnidades                   ycUnidades[]
  ycUsuariosEmpresas           ycUsuariosEmpresas[]
  ycUsuariosEmpresasEscopos    ycUsuariosEmpresasEscopos[]
  ycUsuariosEmpresasPermissoes ycUsuariosEmpresasPermissoes[]
}

model ycEscopos {
  id                        BigInt                      @id(map: "PK_ycEscopos") @default(autoincrement())
  sysCreatedAt              DateTime                    @default(now(), map: "DF__ycEscopos__sysCr__03F0984C")
  sysUpdatedAt              DateTime?
  sysTenantId               BigInt
  sysUserId                 BigInt?
  idPai                     BigInt?
  nome                      String                      @db.VarChar(255)
  tipo                      String                      @db.VarChar(50)
  caminho                   String                      @db.VarChar(1000)
  ativo                     Boolean                     @default(true, map: "DF__ycEscopos__ativo__04E4BC85")
  ycBlocos                  ycBlocos[]
  ycUsuarios                ycUsuarios?                 @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycEscopos_sysUserId")
  ycEmpresas                ycEmpresas                  @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycEscopos_ycEmpresas")
  ycEscopos                 ycEscopos?                  @relation("ycEscoposToycEscopos", fields: [idPai], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycEscopos_ycEscopos_Pai")
  other_ycEscopos           ycEscopos[]                 @relation("ycEscoposToycEscopos")
  ycFluxosPadrao            ycFluxosPadrao[]
  ycLeads                   ycLeads[]
  ycProjetos                ycProjetos[]
  ycPropostas               ycPropostas[]
  ycPropostasCondicoes      ycPropostasCondicoes[]
  ycPropostasHistorico      ycPropostasHistorico[]
  ycTabelasPreco            ycTabelasPreco[]
  ycTabelasPrecoItens       ycTabelasPrecoItens[]
  ycUnidades                ycUnidades[]
  ycUsuariosEmpresasEscopos ycUsuariosEmpresasEscopos[]

  @@index([idPai], map: "IX_ycEscopos_idPai")
  @@index([sysTenantId, caminho], map: "IX_ycEscopos_sysTenantId_caminho")
}

model ycPermissoes {
  id                           BigInt                         @id(map: "PK_ycPermissoes") @default(autoincrement())
  sysCreatedAt                 DateTime                       @default(now(), map: "DF__ycPermiss__sysCr__70DDC3D8")
  sysUpdatedAt                 DateTime?
  codigo                       String                         @unique(map: "UQ_ycPermissoes_codigo") @db.VarChar(100)
  descricao                    String                         @db.VarChar(255)
  categoria                    String                         @db.VarChar(100)
  ycCargosPermissoes           ycCargosPermissoes[]
  ycUsuariosEmpresasPermissoes ycUsuariosEmpresasPermissoes[]
}

model ycUsuarios {
  id                                                          BigInt                         @id(map: "PK_ycUsuarios") @default(autoincrement())
  sysCreatedAt                                                DateTime                       @default(now(), map: "DF__ycUsuario__sysCr__0A9D95DB")
  sysUpdatedAt                                                DateTime?
  nome                                                        String                         @db.VarChar(200)
  email                                                       String                         @unique(map: "UQ_ycUsuarios_email") @db.VarChar(200)
  passwordHash                                                String                         @db.VarChar(500)
  ativo                                                       Boolean                        @default(true, map: "DF__ycUsuario__ativo__0B91BA14")
  ultimoLogin                                                 DateTime?
  isSuperAdmin                                                Boolean                        @default(false, map: "DF__ycUsuario__isSup__2DE6D218")
  ycBlocos                                                    ycBlocos[]
  ycCargos                                                    ycCargos[]
  ycCargosPermissoes                                          ycCargosPermissoes[]
  ycEmpresas                                                  ycEmpresas[]
  ycEscopos                                                   ycEscopos[]
  ycFluxosPadrao                                              ycFluxosPadrao[]
  ycLeads                                                     ycLeads[]
  ycProjetos                                                  ycProjetos[]
  propostasDecididas                                          ycPropostas[]                  @relation("ycPropostas_usuarioDecisaoIdToycUsuarios")
  ycPropostas                                                 ycPropostas[]
  ycPropostasCondicoes                                        ycPropostasCondicoes[]
  ycPropostasHistorico                                        ycPropostasHistorico[]
  ycTabelasPreco                                              ycTabelasPreco[]
  ycTabelasPrecoItens                                         ycTabelasPrecoItens[]
  ycUnidades                                                  ycUnidades[]
  ycUsuariosEmpresas_ycUsuariosEmpresas_sysUserIdToycUsuarios ycUsuariosEmpresas[]           @relation("ycUsuariosEmpresas_sysUserIdToycUsuarios")
  usuariosEmpresas                                            ycUsuariosEmpresas[]           @relation("ycUsuariosEmpresas_usuarioIdToycUsuarios")
  ycUsuariosEmpresasEscopos                                   ycUsuariosEmpresasEscopos[]
  ycUsuariosEmpresasPermissoes                                ycUsuariosEmpresasPermissoes[]
  ycUsuariosRefreshTokens                                     ycUsuariosRefreshTokens[]

  @@index([email], map: "IX_ycUsuarios_email")
}

model ycUsuariosEmpresas {
  id                           BigInt                         @id(map: "PK_ycUsuariosEmpresas") @default(autoincrement())
  sysCreatedAt                 DateTime                       @default(now(), map: "DF__ycUsuario__sysCr__0F624AF8")
  sysUpdatedAt                 DateTime?
  sysTenantId                  BigInt
  sysUserId                    BigInt?
  usuarioId                    BigInt
  cargoId                      BigInt
  ativo                        Boolean                        @default(true, map: "DF__ycUsuario__ativo__10566F31")
  sysUserCriador               ycUsuarios?                    @relation("ycUsuariosEmpresas_sysUserIdToycUsuarios", fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycUsuariosEmpresas_sysUserId")
  ycCargos                     ycCargos                       @relation(fields: [cargoId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresas_ycCargos")
  ycEmpresas                   ycEmpresas                     @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresas_ycEmpresas")
  ycUsuarios                   ycUsuarios                     @relation("ycUsuariosEmpresas_usuarioIdToycUsuarios", fields: [usuarioId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresas_ycUsuarios")
  ycUsuariosEmpresasEscopos    ycUsuariosEmpresasEscopos[]
  ycUsuariosEmpresasPermissoes ycUsuariosEmpresasPermissoes[]

  @@unique([usuarioId, sysTenantId, cargoId], map: "UQ_ycUsuariosEmpresas_MultiPapel")
  @@index([cargoId], map: "IX_ycUsuariosEmpresas_cargoId")
  @@index([sysTenantId], map: "IX_ycUsuariosEmpresas_sysTenantId")
  @@index([usuarioId], map: "IX_ycUsuariosEmpresas_usuarioId")
}

model ycUsuariosEmpresasEscopos {
  id                 BigInt             @id(map: "PK_ycUsuariosEmpresasEscopos") @default(autoincrement())
  sysCreatedAt       DateTime           @default(now(), map: "DF__ycUsuario__sysCr__1DB06A4F")
  sysUpdatedAt       DateTime?
  sysTenantId        BigInt
  sysUserId          BigInt?
  usuarioEmpresaId   BigInt
  escopoId           BigInt
  ycUsuarios         ycUsuarios?        @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycUsuariosEmpresasEscopos_sysUserId")
  ycEmpresas         ycEmpresas         @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasEscopos_ycEmpresas")
  ycEscopos          ycEscopos          @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasEscopos_ycEscopos")
  ycUsuariosEmpresas ycUsuariosEmpresas @relation(fields: [usuarioEmpresaId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasEscopos_ycUsuariosEmpresas")

  @@unique([usuarioEmpresaId, escopoId], map: "UQ_ycUsuariosEmpresasEscopos_Composta")
  @@index([sysTenantId], map: "IX_ycUsuariosEmpresasEscopos_sysTenantId")
}

model ycUsuariosEmpresasPermissoes {
  id                 BigInt             @id(map: "PK_ycUsuariosEmpresasPermissoes") @default(autoincrement())
  sysCreatedAt       DateTime           @default(now(), map: "DF__ycUsuario__sysCr__17036CC0")
  sysUpdatedAt       DateTime?
  sysTenantId        BigInt
  sysUserId          BigInt?
  usuarioEmpresaId   BigInt
  permissaoId        BigInt
  permitido          Boolean
  ycUsuarios         ycUsuarios?        @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycUsuariosEmpresasPermissoes_sysUserId")
  ycEmpresas         ycEmpresas         @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasPermissoes_ycEmpresas")
  ycPermissoes       ycPermissoes       @relation(fields: [permissaoId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasPermissoes_ycPermissoes")
  ycUsuariosEmpresas ycUsuariosEmpresas @relation(fields: [usuarioEmpresaId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosEmpresasPermissoes_ycUsuariosEmpresas")

  @@unique([usuarioEmpresaId, permissaoId], map: "UQ_ycUsuariosEmpresasPermissoes_Composta")
  @@index([sysTenantId], map: "IX_ycUsuariosEmpresasPermissoes_sysTenantId")
}

model ycUsuariosRefreshTokens {
  id           BigInt     @id(map: "PK_ycUsuariosRefreshTokens") @default(autoincrement())
  sysCreatedAt DateTime   @default(now(), map: "DF__ycUsuario__sysCr__245D67DE")
  usuarioId    BigInt
  token        String     @unique(map: "UQ_ycUsuariosRefreshTokens_Token") @db.VarChar(500)
  expiraEm     DateTime
  revogado     Boolean    @default(false, map: "DF__ycUsuario__revog__25518C17")
  ycUsuarios   ycUsuarios @relation(fields: [usuarioId], references: [id], onUpdate: NoAction, map: "FK_ycUsuariosRefreshTokens_Usuario")
}

model ycProjetos {
  id                   BigInt           @id(map: "PK_ycProjetos") @default(autoincrement())
  sysCreatedAt         DateTime         @default(now(), map: "DF__ycProjeto__sysCr__3C34F16F")
  sysUpdatedAt         DateTime?
  sysTenantId          BigInt
  sysUserId            BigInt?
  escopoId             BigInt
  nome                 String           @db.VarChar(255)
  descricao            String?          @db.VarChar(Max)
  tipo                 String           @db.VarChar(50)
  status               String           @db.VarChar(50)
  logo                 String?          @db.VarChar(500)
  cep                  String?          @db.VarChar(8)
  logradouro           String?          @db.VarChar(255)
  numero               String?          @db.VarChar(50)
  complemento          String?          @db.VarChar(100)
  bairro               String?          @db.VarChar(100)
  cidade               String?          @db.VarChar(100)
  estado               String?          @db.Char(2)
  cnpj                 String?          @db.VarChar(20)
  registroIncorporacao String?          @db.VarChar(100)
  matricula            String?          @db.VarChar(100)
  areaTotal            Decimal?         @db.Decimal(18, 2)
  ycBlocos             ycBlocos[]
  ycLeads              ycLeads[]
  ycEmpresas           ycEmpresas       @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycProjetos_ycEmpresas")
  ycEscopos            ycEscopos        @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycProjetos_ycEscopos")
  ycUsuarios           ycUsuarios?      @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycProjetos_ycUsuarios")
  ycTabelasPreco       ycTabelasPreco[]
  ycUnidades           ycUnidades[]

  @@index([escopoId], map: "IX_ycProjetos_escopoId")
  @@index([status], map: "IX_ycProjetos_status")
  @@index([sysTenantId], map: "IX_ycProjetos_sysTenantId")
  @@index([tipo], map: "IX_ycProjetos_tipo")
}

model ycBlocos {
  id           BigInt       @id(map: "PK_ycBlocos") @default(autoincrement())
  sysCreatedAt DateTime     @default(now(), map: "DF__ycBlocos__sysCre__41EDCAC5")
  sysUpdatedAt DateTime?
  sysTenantId  BigInt
  sysUserId    BigInt?
  escopoId     BigInt
  projetoId    BigInt
  codigo       String       @db.VarChar(20)
  nome         String       @db.VarChar(100)
  ycEmpresas   ycEmpresas   @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycBlocos_ycEmpresas")
  ycEscopos    ycEscopos    @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycBlocos_ycEscopos")
  ycProjetos   ycProjetos   @relation(fields: [projetoId], references: [id], onUpdate: NoAction, map: "FK_ycBlocos_ycProjetos")
  ycUsuarios   ycUsuarios?  @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycBlocos_ycUsuarios")
  ycUnidades   ycUnidades[]

  @@index([escopoId], map: "IX_ycBlocos_escopoId")
  @@index([projetoId], map: "IX_ycBlocos_projetoId")
  @@index([sysTenantId], map: "IX_ycBlocos_sysTenantId")
}

model ycFluxosPadrao {
  id                     BigInt         @id(map: "PK_ycFluxosPadrao") @default(autoincrement())
  sysCreatedAt           DateTime       @default(now(), map: "DF__ycFluxosP__sysCr__1A9EF37A")
  sysUpdatedAt           DateTime?
  sysTenantId            BigInt
  sysUserId              BigInt?
  escopoId               BigInt
  tabelaPrecoId          BigInt
  tipo                   String         @db.VarChar(50)
  percentual             Decimal        @db.Decimal(10, 4)
  qtdeParcelas           Int
  dataPrimeiroVencimento DateTime       @db.Date
  periodicidade          Int
  ycEmpresas             ycEmpresas     @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycFluxosPadrao_ycEmpresas")
  ycEscopos              ycEscopos      @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycFluxosPadrao_ycEscopos")
  ycTabelasPreco         ycTabelasPreco @relation(fields: [tabelaPrecoId], references: [id], onUpdate: NoAction, map: "FK_ycFluxosPadrao_ycTabelasPreco")
  ycUsuarios             ycUsuarios?    @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycFluxosPadrao_ycUsuarios")

  @@index([tabelaPrecoId], map: "IX_ycFluxosPadrao_tabelaPrecoId")
  @@index([sysTenantId], map: "IX_ycFluxosPadrao_sysTenantId")
}

model ycLeads {
  id           BigInt        @id(map: "PK_ycLeads") @default(autoincrement())
  sysCreatedAt DateTime      @default(now(), map: "DF__ycLeads__sysCrea__634EBE90")
  sysUpdatedAt DateTime?
  sysTenantId  BigInt
  sysUserId    BigInt?
  escopoId     BigInt
  projetoId    BigInt
  nome         String        @db.VarChar(200)
  email        String?       @db.VarChar(200)
  telefone     String?       @db.VarChar(20)
  origem       String?       @db.VarChar(50)
  status       String        @db.VarChar(50)
  ycEmpresas   ycEmpresas    @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycLeads_ycEmpresas")
  ycEscopos    ycEscopos     @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycLeads_ycEscopos")
  ycProjetos   ycProjetos    @relation(fields: [projetoId], references: [id], onUpdate: NoAction, map: "FK_ycLeads_ycProjetos")
  ycUsuarios   ycUsuarios?   @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycLeads_ycUsuarios")
  ycPropostas  ycPropostas[]

  @@index([email], map: "IX_ycLeads_email")
  @@index([projetoId], map: "IX_ycLeads_projetoId")
  @@index([status], map: "IX_ycLeads_status")
  @@index([sysTenantId], map: "IX_ycLeads_sysTenantId")
}

model ycPropostas {
  id                                                  BigInt                 @id(map: "PK_ycPropostas") @default(autoincrement())
  sysCreatedAt                                        DateTime               @default(now(), map: "DF__ycPropost__sysCr__69FBBC1F")
  sysUpdatedAt                                        DateTime?
  sysTenantId                                         BigInt
  sysUserId                                           BigInt?
  escopoId                                            BigInt
  unidadeId                                           BigInt
  leadId                                              BigInt
  tabelaPrecoId                                       BigInt
  valorTabelaOriginal                                 Decimal                @db.Decimal(18, 2)
  valorProposta                                       Decimal                @db.Decimal(18, 2)
  desconto                                            Decimal                @default(0, map: "DF__ycPropost__desco__6AEFE058") @db.Decimal(18, 2)
  dataProposta                                        DateTime
  validade                                            DateTime
  status                                              String                 @db.VarChar(50)
  dataDecisao                                         DateTime?
  usuarioDecisaoId                                    BigInt?
  motivoRejeicao                                      String?                @db.VarChar(50)
  observacaoDecisao                                   String?                @db.VarChar(500)
  usuarioDecisao                                      ycUsuarios?            @relation("ycPropostas_usuarioDecisaoIdToycUsuarios", fields: [usuarioDecisaoId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycPropostas_Decisor")
  ycEmpresas                                          ycEmpresas             @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycPropostas_ycEmpresas")
  ycEscopos                                           ycEscopos              @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycPropostas_ycEscopos")
  ycLeads                                             ycLeads                @relation(fields: [leadId], references: [id], onUpdate: NoAction, map: "FK_ycPropostas_ycLeads")
  ycTabelasPreco                                      ycTabelasPreco         @relation(fields: [tabelaPrecoId], references: [id], onUpdate: NoAction, map: "FK_ycPropostas_ycTabelasPreco")
  ycUnidades                                          ycUnidades             @relation(fields: [unidadeId], references: [id], onUpdate: NoAction, map: "FK_ycPropostas_ycUnidades")
  ycUsuarios                                          ycUsuarios?            @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycPropostas_ycUsuarios")
  ycPropostasCondicoes                                ycPropostasCondicoes[]
  ycPropostasHistorico                                ycPropostasHistorico[]

  @@index([leadId], map: "IX_ycPropostas_leadId")
  @@index([status], map: "IX_ycPropostas_status")
  @@index([sysTenantId], map: "IX_ycPropostas_sysTenantId")
  @@index([unidadeId], map: "IX_ycPropostas_unidadeId")
  @@index([usuarioDecisaoId], map: "IX_ycPropostas_usuarioDecisaoId")
}

model ycPropostasCondicoes {
  id             BigInt      @id(map: "PK_ycPropostasCondicoes") @default(autoincrement())
  sysCreatedAt   DateTime    @default(now(), map: "DF__ycPropost__sysCr__73852659")
  sysUpdatedAt   DateTime?
  sysTenantId    BigInt
  sysUserId      BigInt?
  escopoId       BigInt
  propostaId     BigInt
  tipo           String      @db.VarChar(50)
  dataVencimento DateTime    @db.Date
  valorParcela   Decimal     @db.Decimal(18, 2)
  qtdeParcelas   Int
  valorTotal     Decimal     @db.Decimal(18, 2)
  ycEmpresas     ycEmpresas  @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasCondicoes_ycEmpresas")
  ycEscopos      ycEscopos   @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasCondicoes_ycEscopos")
  ycPropostas    ycPropostas @relation(fields: [propostaId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasCondicoes_ycPropostas")
  ycUsuarios     ycUsuarios? @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycPropostasCondicoes_ycUsuarios")

  @@index([propostaId], map: "IX_ycPropostasCondicoes_propostaId")
}

model ycTabelasPreco {
  id                  BigInt                @id(map: "PK_ycTabelasPreco") @default(autoincrement())
  sysCreatedAt        DateTime              @default(now(), map: "DF__ycTabelas__sysCr__0880433F")
  sysUpdatedAt        DateTime?
  sysTenantId         BigInt
  sysUserId           BigInt?
  escopoId            BigInt
  projetoId           BigInt
  codigo              String                @db.VarChar(50)
  nome                String                @db.VarChar(100)
  vigenciaInicial     DateTime              @db.Date
  vigenciaFinal       DateTime              @db.Date
  taxaJuros           Decimal               @default(0, map: "DF__ycTabelas__taxaJ__09746778") @db.Decimal(10, 4)
  ycFluxosPadrao      ycFluxosPadrao[]
  ycPropostas         ycPropostas[]
  ycEmpresas          ycEmpresas            @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPreco_ycEmpresas")
  ycEscopos           ycEscopos             @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPreco_ycEscopos")
  ycProjetos          ycProjetos            @relation(fields: [projetoId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPreco_ycProjetos")
  ycUsuarios          ycUsuarios?           @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycTabelasPreco_ycUsuarios")
  ycTabelasPrecoItens ycTabelasPrecoItens[]

  @@index([projetoId], map: "IX_ycTabelasPreco_projetoId")
  @@index([sysTenantId], map: "IX_ycTabelasPreco_sysTenantId")
  @@index([vigenciaInicial, vigenciaFinal], map: "IX_ycTabelasPreco_vigencia")
}

model ycUnidades {
  id                           BigInt                @id(map: "PK_ycUnidades") @default(autoincrement())
  sysCreatedAt                 DateTime              @default(now(), map: "DF__ycUnidade__sysCr__498EEC8D")
  sysUpdatedAt                 DateTime?
  sysTenantId                  BigInt
  sysUserId                    BigInt?
  escopoId                     BigInt
  blocoId                      BigInt
  projetoId                    BigInt
  unidade                      String                @db.VarChar(20)
  codigo                       String                @db.VarChar(50)
  tipo                         String                @db.VarChar(50)
  areaPrivativaPrincipal       Decimal?              @db.Decimal(18, 4)
  areaOutrasPrivativas         Decimal?              @db.Decimal(18, 4)
  areaPrivativaTotal           Decimal?              @db.Decimal(18, 4)
  areaUsoComum                 Decimal?              @db.Decimal(18, 4)
  areaRealTotal                Decimal?              @db.Decimal(18, 4)
  coeficienteProporcionalidade Decimal?              @db.Decimal(18, 9)
  fracaoIdealTerreno           Decimal?              @db.Decimal(18, 9)
  andar                        Int                   @default(0, map: "DF__ycUnidade__andar__2CBDA3B5")
  statusComercial              String                @default("DISPONIVEL", map: "DF__ycUnidade__statu__2DB1C7EE") @db.VarChar(50)
  statusInterno                String                @default("DISPONIVEL", map: "DF__ycUnidade__statu__2EA5EC27") @db.VarChar(50)
  qtdeVagas                    Int                   @default(0, map: "DF__ycUnidade__qtdeV__2F9A1060")
  tipoVaga                     String?               @default("NENHUMA", map: "DF__ycUnidade__tipoV__308E3499") @db.VarChar(50)
  tipoDeposito                 String?               @default("NENHUM", map: "DF__ycUnidade__tipoD__318258D2") @db.VarChar(50)
  areaDeposito                 Decimal?              @default(0, map: "DF__ycUnidade__areaD__32767D0B") @db.Decimal(18, 4)
  ycPropostas                  ycPropostas[]
  ycTabelasPrecoItens          ycTabelasPrecoItens[]
  ycBlocos                     ycBlocos              @relation(fields: [blocoId], references: [id], onUpdate: NoAction, map: "FK_ycUnidades_ycBlocos")
  ycEmpresas                   ycEmpresas            @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycUnidades_ycEmpresas")
  ycEscopos                    ycEscopos             @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycUnidades_ycEscopos")
  ycProjetos                   ycProjetos            @relation(fields: [projetoId], references: [id], onUpdate: NoAction, map: "FK_ycUnidades_ycProjetos")
  ycUsuarios                   ycUsuarios?           @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycUnidades_ycUsuarios")

  @@unique([sysTenantId, codigo], map: "UQ_ycUnidades_SKU")
  @@index([blocoId], map: "IX_ycUnidades_blocoId")
  @@index([projetoId], map: "IX_ycUnidades_projetoId")
  @@index([sysTenantId], map: "IX_ycUnidades_sysTenantId")
  @@index([statusComercial], map: "IX_ycUnidades_statusComercial")
  @@index([statusInterno], map: "IX_ycUnidades_statusInterno")
}

model ycTabelasPrecoItens {
  id                 BigInt         @id(map: "PK_ycTabelasPrecoItens") @default(autoincrement())
  sysCreatedAt       DateTime       @default(now(), map: "DF__ycTabelas__sysCr__11158940")
  sysUpdatedAt       DateTime?
  sysTenantId        BigInt
  sysUserId          BigInt?
  escopoId           BigInt
  tabelaPrecoId      BigInt
  unidadeId          BigInt
  valorMetroQuadrado Decimal        @db.Decimal(18, 2)
  fatorAndar         Decimal        @default(0, map: "DF__ycTabelas__fator__1209AD79") @db.Decimal(10, 4)
  fatorDiretoria     Decimal        @default(0, map: "DF__ycTabelas__fator__12FDD1B2") @db.Decimal(10, 4)
  fatorCorrecao      Decimal        @default(1.0000, map: "DF__ycTabelas__fator__336AA144") @db.Decimal(10, 8)
  ycEmpresas         ycEmpresas     @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPrecoItens_ycEmpresas")
  ycEscopos          ycEscopos      @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPrecoItens_ycEscopos")
  ycTabelasPreco     ycTabelasPreco @relation(fields: [tabelaPrecoId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPrecoItens_ycTabelasPreco")
  ycUnidades         ycUnidades     @relation(fields: [unidadeId], references: [id], onUpdate: NoAction, map: "FK_ycTabelasPrecoItens_ycUnidades")
  ycUsuarios         ycUsuarios?    @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycTabelasPrecoItens_ycUsuarios")

  @@unique([tabelaPrecoId, unidadeId], map: "UQ_ycTabelasPrecoItens_UnidadeUnica")
  @@index([tabelaPrecoId, unidadeId], map: "IX_ycTabelasPrecoItens_BuscaPreco")
  @@index([sysTenantId], map: "IX_ycTabelasPrecoItens_sysTenantId")
}

model ycPropostasHistorico {
  id             BigInt      @id(map: "PK_ycPropostasHistorico") @default(autoincrement())
  sysCreatedAt   DateTime    @default(now(), map: "DF__ycPropost__sysCr__373B3228")
  sysTenantId    BigInt
  sysUserId      BigInt?
  escopoId       BigInt
  propostaId     BigInt
  statusAnterior String?     @db.VarChar(50)
  statusNovo     String      @db.VarChar(50)
  acao           String      @db.VarChar(50)
  observacao     String?     @db.VarChar(500)
  ycEmpresas     ycEmpresas  @relation(fields: [sysTenantId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasHistorico_ycEmpresas")
  ycEscopos      ycEscopos   @relation(fields: [escopoId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasHistorico_ycEscopos")
  ycPropostas    ycPropostas @relation(fields: [propostaId], references: [id], onUpdate: NoAction, map: "FK_ycPropostasHistorico_ycPropostas")
  ycUsuarios     ycUsuarios? @relation(fields: [sysUserId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ycPropostasHistorico_ycUsuarios")

  @@index([sysTenantId], map: "IX_ycPropostasHistorico_sysTenantId")
  @@index([sysUserId], map: "IX_ycPropostasHistorico_sysUserId")
  @@index([propostaId, sysCreatedAt(sort: Desc)], map: "IX_ycPropostasHistorico_Timeline")
}
